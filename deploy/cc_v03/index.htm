	<html>

<head>
	<link rel="stylesheet" href="index.css" type="text/css"/>
	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			extensions: ["tex2jax.js"],
			jax: ["input/TeX","output/HTML-CSS"],
			tex2jax: {inlineMath: [["$$","$$"],["$$$","$$$"]]},
			messageStyle: "none"
		});
	</script>
	<script type="text/javascript" src="../jslib/mathjax/MathJax.js"></script>
	<title> - BeamCAD - </title>
</head>


<body>
	<div id="apptitlebox" class="bmpblock">
		<div>BeamCAD v0.3</div>
		<div><a target="_blank" href="task/index.htm">1. Task	</a></div>
		<div><a target="_blank" href="https://www.surveymonkey.com/s/FBLMLHG">2. Survey	</a></div>
		
	</div>
	<div style="display:flex;flex-wrap:wrap;">
		<div id="invardiv" class="bmpblock">
			<!-- TODO: fix the pattern mathcing here-->
			<x-input	id="Ln"		
						notation ="$$$L_n$$$" 
						unit="mm"
						value="1000"
						type="number"
						min="1000"
						max="50000"
						step="100"></x-input>
						
			<x-input	id="b"
						notation ="$$$b$$$"
						unit="mm"
						value="300"
						type="number"
						min="200"
						max="5000"
						step="10"></x-input>
						
			<x-input	id="D"
						notation ="$$$D$$$"
						unit="mm"
						value="600"
						type="number"
						min="200"
						max="3000"
						data-tooltip="Total depth (vertical height) of beam from top to bottom surface"></x-input>
						
			<x-input	id="cover"
						notation ="$$$\text{Cover}$$$"
						unit="mm"
						value="25"
						type="number"
						min="20"
						max="100"
						step="5"
						data-tooltip="Distance from the outer surface of concrete to the reo bars"></x-input>
						
			<x-input	id="$$$\text{eclass}$$$"
						notation ="E-Class"
						value="A"
						pattern="(A|B|C|D)"
						data-tooltip="Exposure Classification determined by exposure to natural environment. Use A | B | C | D"></x-input>
			
			<x-input	id="df"
						notation="$$$d_f$$$"
						unit="mm"
						value="10"
						data-tooltip="Diameter of figment bars which from the reo 'ribcage'"></x-input> 
						
			<x-input	id="rhoc"
						notation="$$$\rho_c$$$"
						unit="kg/m^3"
						value="2400"
						type="number"
						min="2100"
						max="2800"
						step="10"
						data-tooltip="Concrete Density"></x-input>
						
			<x-input	id="fc"
						notation="$$$f'_c$$$"
						unit="MPa"
						value="32"
						pattern="(20|25|32|40|50|65|80|100)"
						data-tooltip="Concrete Strength"></x-input>
			
		</div>
		<div id="varinfodiv" class="bmpblock" >
			<table style="width:100%;height:350px;padding:0;">
				<tr id="errortr" style="height:8em;display:none" >
					<td id="errortd" style="padding:5px;">Error:</td>
				</tr>
				<tr>
					<td>
						<iframe id="varinfoiframe" src="infos/index.htm" style="border:none;width:100%;height:100%;"></iframe>
					</td>
				</tr>
			</table>
		</div>
	</div>
	<div style="display:flex;flex-wrap:wrap;justify-content:center;">
		<div id="reoinputoutputdiv" class="bmpblock">
			<!--<div id="reocontroldiv"></div>-->
			<div id="reoinputdiv">
				<reo-manager></reo-manager>
			</div>
			<div style="width:100%;"></div>
			<div id="reooutputdiv">
				<reo-output></reo-output>
			</div>
		</div>
		
		
		<div id="crosssectiondiv" class="bmpblock" style="display:flex;flex-wrap:wrap;">
			<h1 style="display:block;width:100%">Cross Section</h1>
			<div style="width:100%;display:flex;justify-content:space-around;">
				<canvas id="crosssectioncanvas" style="background-color:black;"></canvas>
			</div>
		</div>
		<div id="elevationdiv" class="bmpblock" style="display:flex;flex-wrap:wrap;">
			<h1 style="display:block;width:100%">Elevation</h1>
			<div style="width:100%;">
				<canvas id="elevationcanvas" style="background-color:black;"></canvas>
			</div>
		</div>
	</div>
	<div style="min-height:300px;margin-bottom:40px;" class="bmpblock">
		<h1>Calculation Div</h1>
	</div>
	<div id="tooltipbar">
		Pro-tips bar
	</div>
	
</body>










<script>


	
	

	//###########################################################################################
	//###### Canvas resize events ###############################################################
	//###########################################################################################
	window.addEventListener("resize",handleResize);
	setTimeout(handleResize,500);
	setTimeout(handleResize,1500);
	setTimeout(handleResize,5000);
	function handleResize(e){
		var c=document.querySelector("#crosssectioncanvas");
		
		var st=window.getComputedStyle(c.parentElement);
		c.width = Math.min(500,parseInt(st.width));
		c.height = 300;
		
		var c=document.querySelector("#elevationcanvas");
		
		var st=window.getComputedStyle(c.parentElement);
		c.width = parseInt(st.width);
		c.height = 150;
		
		// TODO: Update drawing
	}




	//###########################################################################################
	//###### Reo input/output helpers ###########################################################
	//###########################################################################################
	function setErrorList(list){
		if(list===undefined || list.length==0){
			document.querySelector("#errortr").style.display="none";
		}else{
			document.querySelector("#errortr").style.display="";
			var out = '<h1 style="color:darkred;">Error</h1>'
			for(var i = 0;i<list.length;i++){
				out+="<p>"+list[i]+"</p>";
			}
			document.querySelector("#errortd").innerHTML = out;
		}
	}
	//##################################################################3
	//##### Tooltips ###################################################3
	//##################################################################3
	setTimeout(function(){
		addTooltipTo(document.body);
	},5000);
	function addTooltipTo(d){
		var els = d.querySelectorAll("*");
		for(var i = 0;i<els.length;i++){
			if(els[i].webkitShadowRoot!=null){
				addTooltipTo(els[i].webkitShadowRoot);
				//console.log(els[i]);
			}else if(els[i].getAttribute("data-tooltip")){
				els[i].addEventListener("mouseover",function(e){
					var targ = e.target; 
					while(targ.getAttribute("data-tooltip")===null){
						targ=targ.parentNode;
					}
					var ttb = document.querySelector("#tooltipbar")
					ttb.innerHTML = "Pro-tip: "+targ.getAttribute("data-tooltip");
				});
				els[i].addEventListener("mouseout",function(e){
					var ttb = document.querySelector("#tooltipbar")
					ttb.innerHTML = "";
				});
			}
		}
	}
	
	
	//##########################################################
	//#### Contextual Help View ################################
	//##########################################################
	
	(function(){
		var xins = document.querySelectorAll("x-input");
		for(i=0;i<xins.length;i++){
			xins[i].addEventListener("mousedown",function(e){
				setHelpLoc("infos/"+e.target.id+".htm");
			})
		}
	})()
	
	function setHelpLoc(url){
		if(document.querySelector("#varinfoiframe").getAttribute("src") != url){
			document.querySelector("#varinfoiframe").contentWindow.location.replace(url);
		}
	}
	document.querySelector("#varinfoiframe").addEventListener("load",function(e){
		if(e.target.contentDocument.querySelector("meta")!=null){
			e.target.contentWindow.location.replace("infos/404.htm");
		}
	});
	
	var ifrm = document.querySelector("#varinfoiframe");
</script>


 <script data-root="../" data-main="../cc_v03/main.js" src="../jslib/nickRequire.js"></script>

<script>
///* main.js
</script>
<!--
///* widgets/ReoInput.htm
///* widgets/ReoManager.htm
///* widgets/ReoOutput.htm
///* widgets/XInput.htm
-->
	</html>